<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Secure Agent Portal - Flash Sync Test</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #f4f4f9; }
        .login-card { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; }
        #qr-container { background: #eee; width: 200px; height: 200px; margin: 20px auto; display: flex; align-items: center; justify-content: center; border: 2px dashed #ccc; position: relative; }
        /* THE SYNC BOX */
        #flash-sync-box { width: 60px; height: 60px; position: absolute; bottom: -30px; right: -30px; border: 4px solid #333; border-radius: 8px; transition: background-color 0.05s; }
        .status { margin-top: 20px; font-size: 0.9rem; color: #666; }
    </style>
</head>
<body>

<div class="login-card">
    <h2>Agent Login</h2>
    <p>Scan the QR and wait for the color sync</p>
    
    <div id="qr-container">
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=SESSION_ID_12345" alt="Login QR">
        <div id="flash-sync-box"></div>
    </div>

    <div class="status">
        Syncing with Server... <br>
        <small id="sequence-log">Sequence: Waiting...</small>
    </div>
</div>

<script>
    // Config: Colors must be very distinct (RGB)
    const COLORS = ['#FF0000', '#00FF00', '#0000FF']; // Red, Green, Blue
    const syncBox = document.getElementById('flash-sync-box');
    const log = document.getElementById('sequence-log');
    
    // In production, this array comes from your Backend API
    let testSequence = [];
    for(let i=0; i<10; i++) {
        testSequence.push(COLORS[Math.floor(Math.random() * COLORS.length)]);
    }
    log.innerText = "Target Sequence: " + testSequence.join(' -> ');

    let currentIndex = 0;
    
    // Start flashing at 200ms intervals
    // 200ms is the "Goldilocks" speed: too fast for AnyDesk lag, slow enough for phone cameras.
    function runFlash() {
        syncBox.style.backgroundColor = testSequence[currentIndex];
        currentIndex = (currentIndex + 1) % testSequence.length;
    }

    setInterval(runFlash, 200);
</script>

</body>
</html>
